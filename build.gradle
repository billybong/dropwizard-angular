apply plugin: 'application'
apply plugin: 'java'
apply plugin: 'idea'

mainClassName = "se.com.eyc.employeecatalog.CatalogService"

configurations {
    //hack to simulate provided scope in Gradle, see http://forums.gradle.org/gradle/topics/how_do_i_best_define_dependencies_as_provided
    provided
}

repositories{
	mavenCentral()
	}

sourceSets {
    main { compileClasspath += configurations.provided }
}

dependencies{
	compile 'com.yammer.dropwizard:dropwizard-core:0.6.2',
            'org.projectlombok:lombok:1.12.2'
}

run {
    args 'server', 'src/dist/conf/config.yml'
}

task(debug, dependsOn: 'classes', type: JavaExec) {
    main = mainClassName
    classpath = sourceSets.main.runtimeClasspath
    args 'server', 'src/dist/conf/config.yml'
    jvmArgs = ["-Xdebug", "-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005"]
}